<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Birthday Celebration</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2>ðŸŽ‚ Enter Your Details</h2>
      <input type="text" id="name" placeholder="Your Name" required>
      <input type="text" id="dob" placeholder="Your Date of Birth (YYYY-MM-DD)" required>
      <button onclick="startCelebration()">Celebrate</button>
    </div>
  </div>

  <!-- Main Birthday Page -->
  <div class="container" id="container">
    <div class="cake">
      <div class="layer"></div>
      <div class="layer"></div>
      <div class="layer"></div>
      <div class="layer"></div>
      <div class="candle">
        <div class="flame"></div>
      </div>
    </div>
    <h1 id="greeting">Happy Birthday!</h1>
    <p id="age"></p>
  </div>

  <!-- Confetti -->
  <canvas id="confetti"></canvas>

  <script>
    function startCelebration() {
      const name = document.getElementById("name").value || "Friend";
      const dob = document.getElementById("dob").value;
      if (!dob) return;

      // Calculate age
      let today = new Date();
      let birthDate = new Date(dob);
      let age = today.getFullYear() - birthDate.getFullYear();
      let m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }

      // Update text
      document.getElementById("greeting").innerText = `Happy Birthday, ${name}! ðŸŽ‚`;
      document.getElementById("age").innerText = `You are ${age} years old ðŸŽ‰`;

      // Hide modal, show main
      document.getElementById("modal").style.display = "none";
      document.getElementById("container").style.display = "block";

      // Start confetti
      startConfetti();
    }

    // Confetti Animation
    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;

    let confettiParticles = [];
    function randomColor() {
      return `hsl(${Math.random() * 360}, 100%, 50%)`;
    }

    function createConfetti() {
      for (let i = 0; i < 200; i++) {
        confettiParticles.push({
          x: Math.random() * confettiCanvas.width,
          y: Math.random() * confettiCanvas.height - confettiCanvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * 150,
          color: randomColor(),
          tilt: Math.random() * 10 - 10,
          tiltAngleIncrement: Math.random() * 0.07 + 0.05,
          tiltAngle: 0
        });
      }
    }

    function drawConfetti() {
      ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
      confettiParticles.forEach(p => {
        ctx.beginPath();
        ctx.lineWidth = p.r;
        ctx.strokeStyle = p.color;
        ctx.moveTo(p.x + p.tilt + p.r / 4, p.y);
        ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r / 4);
        ctx.stroke();
      });
      updateConfetti();
    }

    function updateConfetti() {
      confettiParticles.forEach(p => {
        p.tiltAngle += p.tiltAngleIncrement;
        p.y += (Math.cos(p.d) + 3 + p.r / 2) / 2;
        p.tilt = Math.sin(p.tiltAngle - p.d / 3) * 15;
        if (p.y > confettiCanvas.height) {
          p.x = Math.random() * confettiCanvas.width;
          p.y = -20;
        }
      });
    }

    function startConfetti() {
      createConfetti();
      (function animate() {
        requestAnimationFrame(animate);
        drawConfetti();
      })();
    }
  </script>
</body>
</html>
